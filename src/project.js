window.__require=function t(e,a,n){function s(i,r){if(!a[i]){if(!e[i]){var c=i.split("/");if(c=c[c.length-1],!e[c]){var u="function"==typeof __require&&__require;if(!r&&u)return u(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+i+"'")}}var h=a[i]={exports:{}};e[i][0].call(h.exports,function(t){return s(e[i][1][t]||t)},h,h.exports,t,e,a,n)}return a[i].exports}for(var o="function"==typeof __require&&__require,i=0;i<n.length;i++)s(n[i]);return s}({TypingMessage:[function(t,e,a){"use strict";cc._RF.push(e,"9a98fa5wUhLT7qBU8nQTOuD","TypingMessage"),cc.Class({extends:cc.Component,properties:{typingBox:cc.EditBox,chatBox:cc.Prefab,scrollViewsContent:cc.ScrollView,userData:cc.Node,client:cc.Node},start:function(){this.typingBox.focus(),this._client=this.client.getComponent("client"),this._userData=this.userData.getComponent("userData")},messageTemp:function(){this._messageTemp=this.typingBox.string},sendMessage:function(){this.messageTemp();var t={text:this._messageTemp,x:140,y:60*this.scrollViewsContent.content.childrenCount+40,avatar:this._userData.avatar,userName:this._userData.userName};this._client.sendMessage(t.text),this.scrollViewsContent.node.getComponent("scrollviewCtrl").pushMessageUp();var e=cc.instantiate(this.chatBox);e.getComponent("chatBox").setMessage(t),e.parent=this.scrollViewsContent.content,this.scrollViewsContent.scrollToBottom(.1),this.clearEditBox(),this.focus()},clearEditBox:function(){this.messageTemp(),this.typingBox.string="",this.typingBox.node.getChildByName("TEXT_LABEL").string=""},getMessage:function(t){this.scrollViewsContent.node.getComponent("scrollviewCtrl").pushMessageUp();var e=cc.instantiate(this.chatBox);e.getComponent("chatBox").setMessage(t),e.parent=this.scrollViewsContent.content},focus:function(){this.typingBox.focus()}}),cc._RF.pop()},{}],avatarButtonCtrl:[function(t,e,a){"use strict";cc._RF.push(e,"c892694KGZDCoC97D29oX64","avatarButtonCtrl"),cc.Class({extends:cc.Component,properties:{avatar:cc.Sprite},start:function(){},setAvatar:function(){this.avatar.spriteFrame=this.node.getComponent(cc.Button).target.getComponent(cc.Sprite).spriteFrame,this.closeAvatarPool()},closeAvatarPool:function(){this.node.parent.active=!1}}),cc._RF.pop()},{}],avatarManager:[function(t,e,a){"use strict";cc._RF.push(e,"68e96nv/LtC8pNW1xlfbB2B","avatarManager"),cc.Class({extends:cc.Component,properties:{avatarPool:cc.Node},start:function(){},openAvatarPool:function(){this.avatarPool.active=!0}}),cc._RF.pop()},{}],avatarPool:[function(t,e,a){"use strict";cc._RF.push(e,"8e424IkBXpGSa8606VUvHbV","avatarPool"),cc.Class({extends:cc.Component,properties:{avatar:[cc.SpriteFrame]},start:function(){}}),cc._RF.pop()},{}],chatBox:[function(t,e,a){"use strict";cc._RF.push(e,"3882f5EedNHMLmTcnXaiW8M","chatBox"),cc.Class({extends:cc.Component,properties:{textLabel:cc.Label,avatar:cc.Sprite,nameLabel:cc.Label},start:function(){},update:function(t){this.node.height=this.textLabel.node.height+40},setMessage:function(t){this.avatar.spriteFrame=t.avatar,this.textLabel.string=t.text,this.nameLabel.string=t.userName,this.node.x=t.x,this.node.x<=120&&(this.nameLabel.node.x=-90,this.nameLabel.node.anchorX=0,this.node.color=new cc.Color(39,109,109),this.avatar.node.x=-270),this.node.y=t.y,cc.log(this.node.height,this.textLabel.node.height)}}),cc._RF.pop()},{}],client:[function(t,e,a){"use strict";function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}cc._RF.push(e,"70ff7/edkFDzY1zGKBKlc9j","client"),cc.Class({extends:cc.Component,properties:{manager:cc.Node,userData:cc.Node,avatarPool:cc.Node},onLoad:function(){this._avatarPool=this.avatarPool.getComponent("avatarPool"),this._manager=this.manager.getComponent("TypingMessage"),this._userData=this.userData.getComponent("userData"),this.socket=io("https://serverchatapp.onrender.com")},setupSocketListeners:function(){this.socket.on("connect",function(){console.log("Connected to server")}),this.getMessage()},sendMessage:function(t){var e=this._userData.userName,a=this._userData.userAvatarName;this._name=e,this.socket.emit("on-chat",{name:e,avatarName:a,message:t})},getMessage:function(){var t=this;this.socket.on("user-chat",function(e){var a=t._name;t.getAvatar(e.avatarName);var s=n({text:e.message,x:120,y:60*t._manager.scrollViewsContent.content.childrenCount+40,avatar:null,userName:e.name},"avatar",t.avatarFrame);e.name!=a&&t._manager.getMessage(s)})},getAvatar:function(t){for(var e=0;e<this._avatarPool.avatar.length;e++)if(this._avatarPool.avatar[e].name===t){this.avatarFrame=this._avatarPool.avatar[e];break}},start:function(){this.setupSocketListeners()}}),cc._RF.pop()},{}],loginManager:[function(t,e,a){"use strict";cc._RF.push(e,"9da45lHjnZDMrr4qI/uKZ19","loginManager"),cc.Class({extends:cc.Component,properties:{avatar:cc.Sprite,inputName:cc.EditBox,mainChat:cc.Node,userData:cc.Node,notification:cc.Label},start:function(){},setUserName:function(){this._userData=this.userData.getComponent("userData"),this._userData.userName=this.inputName.string,""!==this._userData.userName?(this._userData.avatar=this.avatar.spriteFrame,this._userData.userAvatarName=this.avatar.spriteFrame.name,"default_sprite"!==this._userData.userAvatarName?(this.node.parent.active=!1,this.mainChat.active=!0):this.onNotification("Please choose an avatar")):this.onNotification("Please enter name")},onNotification:function(t){this.notification.node.active=!0,this.notification.string=t}}),cc._RF.pop()},{}],scrollviewCtrl:[function(t,e,a){"use strict";cc._RF.push(e,"e5db2FktnVJZJpWbHwNCOxw","scrollviewCtrl"),cc.Class({extends:cc.Component,properties:{},start:function(){},pushMessageUp:function(){this.node.getComponent(cc.ScrollView).content.getChildren().forEach(function(t){t.zIndex++})}}),cc._RF.pop()},{}],userData:[function(t,e,a){"use strict";cc._RF.push(e,"261e23HXI1KbYRcWUcsGY4l","userData"),cc.Class({extends:cc.Component,properties:{userName:"",userAvatar:cc.SpriteFrame,userAvatarName:String},start:function(){}}),cc._RF.pop()},{}]},{},["TypingMessage","avatarButtonCtrl","avatarManager","avatarPool","chatBox","client","loginManager","scrollviewCtrl","userData"]);